<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‡èƒ½å¤šè¯­è¨€è¯å…¸</title>
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            font-family: 'Segoe UI', Arial, sans-serif;
            background-image: url('/static/images/bck2.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            flex-direction: column;
        }

        /* å¯¼èˆªæ  */
        nav {
            background-color: rgba(51, 51, 51, 0.95);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
            width: 100%;
            color: white;
        }

        .nav-links { display: flex; gap: 20px; }
        .nav-links a { color: white; text-decoration: none; font-size: 14px; }

        /* ä¸»ä½“å¸ƒå±€ */
        .main-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* è¯­è¨€é€‰æ‹©å™¨ */
        .language-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 25px;
            border-radius: 50px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: all 0.2s;
        }
        .language-header:hover { transform: translateY(-2px); background: #fff; }

        .lang-item { display: flex; align-items: center; gap: 10px; font-size: 20px; font-weight: 600; color: #333; }
        .flag { width: 35px; height: 25px; object-fit: cover; border-radius: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .swap-icon { font-size: 20px; color: #888; }

        /* æœç´¢æ¡† */
        .search-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            display: flex;
            align-items: center;
        }
        .search-container input {
            width: 100%;
            padding: 18px 120px 18px 60px;
            font-size: 18px;
            border: none;
            border-radius: 50px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            outline: none;
        }
        .search-icon { position: absolute; left: 20px; font-size: 22px; color: #999; }
        .search-btn {
            position: absolute;
            right: 8px;
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 40px;
            cursor: pointer;
            font-weight: bold;
        }

        /* ç»“æœå¡ç‰‡åŠ¨ç”» */
        #result-container {
            max-width: 600px;
            width: 100%;
            margin-top: 25px;
            animation: slideUp 0.4s ease-out;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å°èŠ‚åˆ†å‰²çº¿ï¼šæœªå®Œæˆä½“/å®Œæˆä½“ä¹‹é—´çš„æ¨ªæ¡ */
        .section-divider {
            background: #f1f5f9;
            color: #475569;
            padding: 10px 25px;
            font-size: 14px;
            font-weight: 800;
            border-left: 5px solid #4CAF50;
            margin-top: 5px;
            text-transform: uppercase;
        }

        /* è¡¥å…¨é¡¹çš„å¾®è°ƒï¼šé¢œè‰²ç¨å¾®æ·¡ä¸€ç‚¹ä»¥ç¤ºåŒºåˆ« */
        .remaining-item {
            background: #ffffff;
            border: 1px dashed #e2e8f0;
        }

        .remaining-item .detail-label {
        color: #94a3b8;
        font-style: italic;}

        /* ä¿è¯æœ€åä¸€ä¸ªç½‘æ ¼åº•éƒ¨æœ‰ç•™ç™½ */
        .detail-grid:last-child {
        padding-bottom: 30px;
        }

        /* ç»“æœå¡ç‰‡æ·±åº¦ç¾åŒ– */
.result-card {
    position: relative;
    background: #ffffff;
    padding: 0; /* å†…éƒ¨æ”¹ç”¨ padding æ§åˆ¶ */
    border-radius: 24px;
    margin-bottom: 30px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.12);
    border: 1px solid rgba(255,255,255,0.8);
    overflow: hidden;
    transition: transform 0.3s ease;
}

.result-card:hover {
    transform: translateY(-5px);
}

/* å¡ç‰‡å¤´éƒ¨ï¼šäº®è‰²æ¸å˜ */
.card-header {
    background: linear-gradient(135deg, #f6f9ff 0%, #f0f4f8 100%);
    padding: 20px 25px;
    border-bottom: 1px solid #eef2f6;
}

.card-header .word-root {
    font-size: 13px;
    color: #94a3b8;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 4px;
    display: block;
}

.card-header .word-meaning {
    font-size: 26px;
    font-weight: 800;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* æ ‡ç­¾å¼è¯æ€§æ˜¾ç¤º */
.type-tag {
    font-size: 12px;
    background: #4CAF50;
    color: white;
    padding: 2px 10px;
    border-radius: 6px;
    vertical-align: middle;
}

/* å†…å®¹åŒºåŸŸï¼šå»è¡¨æ ¼åŒ–ï¼Œæ”¹ç”¨ Flex å¸ƒå±€ */
.detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 12px;
    padding: 25px;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background: #f8fafc;
    border-radius: 12px;
    border: 1px solid #f1f5f9;
}

.detail-label {
    font-size: 13px;
    color: #64748b;
    font-weight: 500;
}

.detail-value {
    font-size: 15px;
    color: #0f172a;
    font-weight: 600;
}

        /* å¼¹çª—æ ·å¼ */
        #language-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            width: 85%;
            max-width: 400px;
            border-radius: 20px;
            padding: 20px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
        }
        .lang-list { overflow-y: auto; flex: 1; }
        .lang-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }
        .lang-option:hover { background: #f9f9f9; }

        /* ç»Ÿä¸€é—®å·å ä½ç¬¦çš„æ ·å¼ï¼Œä½¿å…¶ä¸å›½æ——å¤–è§‚ä¸€è‡´ */
#target-flag-placeholder {
    background: #1e293b !important;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
}

        /* åƒåœ¾æ¡¶å®¹å™¨æ ·å¼ */
.clear-btn {
    position: absolute;
    right: -50px;
    cursor: pointer;
    padding: 8px;
    color: #00d2ff; /* é»˜è®¤äº®è“è‰² */
    filter: drop-shadow(0 0 8px rgba(0, 210, 255, 0.4));
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* é¼ æ ‡æ‚¬åœæ•ˆæœ */
.clear-btn:hover {
    color: #0095ff; /* æ‚¬åœæ·±è“è‰² */
    transform: scale(1.2);
}

/* å†…éƒ¨ SVG çš„å¡«å……æ ·å¼ */
.clear-btn svg {
    /* å¦‚æœä½ æƒ³è®©é¢œè‰²å¡«æ»¡å›¾æ ‡å†…éƒ¨ï¼Œå°† fill è®¾ç½®ä¸º currentColor */
    fill: rgba(0, 0, 0, 0.2); 
    transition: fill 0.3s ease;
}

.clear-btn:hover svg {
    fill: rgba(0, 149, 255, 0.4); /* æ‚¬åœæ—¶å¡«å……åŠ æ·± */
}
    </style>
</head>
<body>

<nav>
    <h1 id="nav-title">ä¸­ä¿„è¯å…¸</h1>
    <div class="nav-links">
        <a href="#">é¦–é¡µ</a>
        <a href="#">å…³äº</a>
    </div>
</nav>

<div class="main-wrapper">
    <div class="language-header" id="lang-trigger">
        <div class="lang-item">
            <img src="https://flagcdn.com/w80/cn.png" class="flag">
            <span>ä¸­æ–‡</span>
        </div>
        <div class="swap-icon">â†”</div>
        <div class="lang-item">
    <div id="target-flag-placeholder" class="flag" style="background-color: #1a1a1a; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px; width: 35px; height: 25px; border-radius: 3px;">?</div>
    
    <img id="target-flag" src="" class="flag" style="display: none;">
    <span id="target-text">é€‰æ‹©ç›®æ ‡è¯­è¨€</span>
</div>
    </div>

    <form class="search-container" id="search-form">
    <span class="search-icon">ğŸ”</span>
    <input type="text" id="search-input" placeholder="è¯·è¾“å…¥ä¿„è¯­å•è¯..." autofocus>
    <button type="submit" class="search-btn">æœç´¢</button>

    <div class="clear-btn" onclick="clearAll()" title="æ¸…ç©ºæ‰€æœ‰ç»“æœ">
    <svg width="26" height="26" viewBox="0 0 24 24" fill="none" 
         stroke="currentColor" stroke-width="2.8" 
         stroke-linecap="round" stroke-linejoin="round">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
    </svg>
</div>
</form>

    <div id="result-container"></div>
</div>

<div id="language-modal">
    <div class="modal-content">
        <h3 style="text-align:center; margin-bottom:15px;">åˆ‡æ¢ç›®æ ‡è¯­è¨€</h3>
        <div class="lang-list" id="lang-list-content"></div>
        <button onclick="closeModal()" style="margin-top:15px; padding:12px; border:none; border-radius:10px; cursor:pointer;">å–æ¶ˆ</button>
    </div>
</div>
<script src="/static/js/lang-schemas.js"></script>
<script>
    // 1. 100ç§è¯­è¨€é…ç½®ä»“åº“
    const langConfigs = {
        //1. å°æ¬§
        //æ–¯æ‹‰å¤«è¯­æ—
        "ru": { name: "ä¿„è¯­", flag: "ru", title: "ä¸­ä¿„è¯å…¸" },
        "uk": { name: "ä¹Œå…‹å…°è¯­", flag: "ua", title: "ä¸­ä¹Œå…‹å…°è¯å…¸" },
        "be": { name: "ç™½ä¿„ç½—æ–¯è¯­", flag: "by", title: "ä¸­ç™½ä¿„è¯å…¸" },
        "pl": { name: "æ³¢å…°è¯­", flag: "pl", title: "ä¸­æ³¢è¯å…¸" },
        "cs": { name: "æ·å…‹è¯­", flag: "cz", title: "ä¸­æ·è¯å…¸" },
        "bg": { name: "ä¿åŠ åˆ©äºšè¯­", flag: "bg", title: "ä¸­ä¿è¯å…¸" },
        "sr": { name: "å¡å°”ç»´äºšè¯­", flag: "rs", title: "ä¸­å¡è¯å…¸" },
        "hr": { name: "å…‹ç½—åœ°äºšè¯­", flag: "hr", title: "ä¸­å…‹è¯å…¸" },
        "sk": { name: "æ–¯æ´›ä¼å…‹è¯­", flag: "sk", title: "ä¸­æ–¯æ´›è¯å…¸" },
        "sl": { name: "æ–¯æ´›æ–‡å°¼äºšè¯­", flag: "si", title: "ä¸­æ–¯æ´›æ–‡å°¼äºšè¯å…¸" },
        "mk": { name: "é©¬å…¶é¡¿è¯­", flag: "mk", title: "ä¸­é©¬å…¶é¡¿è¯å…¸" },


        //ç½—æ›¼è¯­æ—
        "fr": { name: "æ³•è¯­", flag: "fr", title: "ä¸­æ³•è¯å…¸" },
        "es": { name: "è¥¿ç­ç‰™è¯­", flag: "es", title: "ä¸­è¥¿è¯å…¸" },
        "it": { name: "æ„å¤§åˆ©è¯­", flag: "it", title: "ä¸­æ„è¯å…¸" },
        "pt": { name: "è‘¡è„ç‰™è¯­", flag: "pt", title: "ä¸­è‘¡è¯å…¸" },

        //æ—¥è€³æ›¼è¯­æ—
        "de": { name: "å¾·è¯­", flag: "de", title: "ä¸­å¾·è¯å…¸" },
        "nl": { name: "è·å…°è¯­", flag: "nl", title: "ä¸­è·è¯å…¸" },
        "sv": { name: "ç‘å…¸è¯­", flag: "se", title: "ä¸­ç‘è¯å…¸" },
        "da": { name: "ä¸¹éº¦è¯­", flag: "dk", title: "ä¸­ä¸¹è¯å…¸" },
        "no": { name: "æŒªå¨è¯­", flag: "no", title: "ä¸­æŒªè¯å…¸" },
        "is": { name: "å†°å²›è¯­", flag: "is", title: "ä¸­å†°è¯å…¸" },
        "fi": { name: "èŠ¬å…°è¯­", flag: "fi", title: "ä¸­èŠ¬è¯å…¸" },

        //å°åº¦-ä¼Šæœ—è¯­æ—
        "fa": { name: "æ³¢æ–¯è¯­", flag: "ir", title: "ä¸­æ³¢æ–¯è¯å…¸" },
        "hi": { name: "å°åœ°è¯­", flag: "in", title: "ä¸­å°åœ°è¯å…¸" },
        "bn": { name: "å­ŸåŠ æ‹‰è¯­", flag: "bd", title: "ä¸­å­ŸåŠ æ‹‰è¯å…¸" },
        "ur": { name: "ä¹Œå°”éƒ½è¯­", flag: "pk", title: "ä¸­ä¹Œå°”éƒ½è¯å…¸" },
        "tg": { name: "å¡”å‰å…‹è¯­", flag: "tj", title: "ä¸­å¡”å‰å…‹è¯å…¸" },



        //å‡¯å°”ç‰¹è¯­æ—
        "ga": { name: "çˆ±å°”å…°è¯­", flag: "ie", title: "ä¸­çˆ±å°”å…°è¯å…¸" },
        "cy": { name: "å¨å°”å£«è¯­", flag: "gb", title: "ä¸­å¨å°”å£«è¯å…¸" },

        //é›…åˆ©å®‰è¯­æ—
        "mr": { name: "é©¬æ‹‰åœ°è¯­", flag: "in", title: "ä¸­é©¬æ‹‰åœ°è¯å…¸" },

        
        //2. é˜¿å°”æ³°è¯­ç³»
        //çªå¥è¯­æ—
        "tr": { name: "åœŸè€³å…¶è¯­", flag: "tr", title: "ä¸­åœŸè¯å…¸" },
        "kk": { name: "å“ˆè¨å…‹è¯­", flag: "kz", title: "ä¸­å“ˆè¯å…¸" },
        "ky": { name: "å‰å°”å‰æ–¯è¯­", flag: "kg", title: "ä¸­å‰è¯å…¸" },
        "uz": { name: "ä¹Œå…¹åˆ«å…‹è¯­", flag: "uz", title: "ä¸­ä¹Œå…¹åˆ«å…‹è¯å…¸" },
        "tk": { name: "åœŸåº“æ›¼è¯­", flag: "tm", title: "ä¸­åœŸåº“æ›¼è¯å…¸" },
        "az": { name: "é˜¿å¡æ‹œç–†è¯­", flag: "az", title: "ä¸­é˜¿å¡æ‹œç–†è¯å…¸" },
        "tt": { name: "é‘é¼è¯­", flag: "ru", title: "ä¸­é‘é¼è¯å…¸" },
        "ug": { name: "ç»´å¾å°”è¯­", flag: "cn", title: "ä¸­ç»´å¾å°”è¯å…¸" },

        //æ±‰è—è¯­ç³»
        //è—ç¼…è¯­æ—
        "bo": { name: "è—è¯­", flag: "cn", title: "ä¸­è—è¯å…¸" },
        "my": { name: "ç¼…ç”¸è¯­", flag: "mm", title: "ä¸­ç¼…è¯å…¸" },
        
        //å£®ä¾—è¯­æ—
        "th": { name: "æ³°è¯­", flag: "th", title: "ä¸­æ³°è¯å…¸" },
        "la": { name: "è€æŒè¯­", flag: "la", title: "ä¸­è€è¯å…¸" },
        "": { name: "å£®è¯­", flag: "cn", title: "ä¸­å£®è¯å…¸" },

        //è‹—ç‘¶è¯­æ—
        "hmn": { name: "è‹—è¯­", flag: "cn", title: "ä¸­è‹—è¯å…¸" },

        //å—äºšè¯­ç³»
        //å­Ÿ-é«˜æ£‰è¯­æ—
        "vn": { name: "è¶Šå—è¯­", flag: "vn", title: "ä¸­è¶Šè¯å…¸" },
        "km": { name: "é«˜æ£‰è¯­", flag: "kh", title: "ä¸­æŸ¬è¯å…¸" },

        //é«˜åŠ ç´¢è¯­ç³»
        "ce": { name: "è½¦è‡£è¯­", flag: "ru", title: "ä¸­è½¦è‡£è¯å…¸" },

        //å—å²›è¯­ç³»
        "id": { name: "å°å°¼è¯­", flag: "id", title: "ä¸­å°å°¼è¯å…¸" },
        "ms": { name: "é©¬æ¥è¯­", flag: "my", title: "ä¸­é©¬æ¥è¯å…¸" },
        "tl": { name: "è²å¾‹å®¾è¯­", flag: "ph", title: "ä¸­è²è¯å…¸" },

        //è¾¾ç½—æ¯—è¼è¯­ç³»
        "ta": { name: "æ³°ç±³å°”è¯­", flag: "lk", title: "ä¸­æ³°ç±³å°”è¯å…¸" },
        "te": { name: "æ³°å¢å›ºè¯­", flag: "in", title: "ä¸­æ³°å¢å›ºè¯å…¸" },
        "kn": { name: "å¡çº³è¾¾è¯­", flag: "in", title : "ä¸­å¡çº³è¾¾è¯å…¸" },
        "ml": { name: "é©¬æ‹‰é›…æ‹‰å§†è¯­", flag: "in", title: "ä¸­é©¬æ‹‰é›…æ‹‰å§†è¯å…¸" },
        "gu": { name: "å¤å‰æ‹‰ç‰¹è¯­", flag: "in", title: "ä¸­å¤å‰æ‹‰ç‰¹è¯å…¸" },

        "ko": { name: "éŸ©è¯­", flag: "kr", title: "ä¸­éŸ©è¯å…¸" },
        "ar": { name: "é˜¿æ‹‰ä¼¯è¯­", flag: "sa", title: "ä¸­é˜¿è¯å…¸" },
        "hu": { name: "åŒˆç‰™åˆ©è¯­", flag: "hu", title: "ä¸­åŒˆè¯å…¸" },
        "el": { name: "å¸Œè…Šè¯­", flag: "gr", title: "ä¸­å¸Œè¯å…¸" },
        "he": { name: "å¸Œä¼¯æ¥è¯­", flag: "il", title: "ä¸­å¸Œä¼¯æ¥è¯å…¸" },
        "ro": { name: "ç½—é©¬å°¼äºšè¯­", flag: "ro", title: "ä¸­ç½—è¯å…¸" },
        "lt": { name: "ç«‹é™¶å®›è¯­", flag: "lt", title: "ä¸­ç«‹è¯å…¸" },
        "lv": { name: "æ‹‰è„±ç»´äºšè¯­", flag: "lv", title: "ä¸­æ‹‰è¯å…¸" },
        "et": { name: "çˆ±æ²™å°¼äºšè¯­", flag: "ee", title: "ä¸­çˆ±è¯å…¸" },

        

        "ka": { name: "æ ¼é²å‰äºšè¯­", flag: "ge", title: "ä¸­æ ¼è¯å…¸" },
        "hy": { name: "äºšç¾å°¼äºšè¯­", flag: "am", title: "ä¸­äºšç¾å°¼äºšè¯å…¸" },
        "sq": { name: "é˜¿å°”å·´å°¼äºšè¯­", flag: "al", title: "ä¸­é˜¿å°”å·´å°¼äºšè¯å…¸" },
        "sw": { name: "æ–¯ç“¦å¸Œé‡Œè¯­", flag: "ke", title: "ä¸­æ–¯ç“¦å¸Œé‡Œè¯å…¸" },
        "am": { name: "é˜¿å§†å“ˆæ‹‰è¯­", flag: "et", title: "ä¸­é˜¿å§†å“ˆæ‹‰è¯å…¸" },
        "ha": { name: "è±ªè¨è¯­", flag: "ng", title: "ä¸­è±ªè¨è¯å…¸" },
        "zu": { name: "ç¥–é²è¯­", flag: "za", title: "ä¸­ç¥–é²è¯å…¸" },
        "mn": { name: "è’™å¤è¯­", flag: "mn", title: "ä¸­è’™è¯å…¸" },
        "qu": { name: "å…‹ä¸˜äºšè¯­", flag: "pe", title: "ä¸­å…‹ä¸˜äºšè¯å…¸" },
        "gn": { name: "ç“œæ‹‰å°¼è¯­", flag: "py", title: "ä¸­ç“œæ‹‰å°¼è¯å…¸" },
        "pa": { name: "æ—é®æ™®è¯­", flag: "in", title: "ä¸­æ—é®æ™®è¯å…¸" },
        "or": { name: "å¥¥é‡Œäºšè¯­", flag: "in", title: "ä¸­å¥¥é‡Œäºšè¯å…¸" },
        "si": { name: "åƒ§ä¼½ç½—è¯­", flag: "lk", title: "ä¸­åƒ§ä¼½ç½—è¯å…¸" },
        "os": { name: "å¥¥å¡æ¢¯è¯­", flag: "ru", title: "ä¸­å¥¥å¡æ¢¯è¯å…¸" },
        "ba": { name: "å·´ä»€åŸºå°”è¯­", flag: "ru", title: "ä¸­å·´ä»€åŸºå°”è¯å…¸" },
        "gag": { name: "åŠ å‘Šå…¹è¯­", flag: "md", title: "ä¸­åŠ å‘Šå…¹è¯å…¸" },
        "jp": { name: "æ—¥è¯­", flag: "jp", title: "ä¸­æ—¥è¯å…¸" }







    };

    let currentTargetLang = null; // å½“å‰é€‰ä¸­çš„ç›®æ ‡è¯­è¨€ä»£ç 

    // 2. ç•Œé¢åˆå§‹åŒ–ä¸å¼¹çª—é€»è¾‘
    const langTrigger = document.getElementById('lang-trigger');
    const modal = document.getElementById('language-modal');
    const langListContent = document.getElementById('lang-list-content');

    langTrigger.onclick = () => {
        langListContent.innerHTML = '';

        // --- æ–°å¢ï¼šåœ¨æœ€ä¸Šæ–¹æ·»åŠ â€œå›åˆ°åˆå§‹çŠ¶æ€â€æŒ‰é’® ---
    const resetDiv = document.createElement('div');
    resetDiv.className = 'lang-option';// ç»§æ‰¿ hover åŠ¨ç”»
    resetDiv.style.borderBottom = '2px solid #f1f5f9'; // ç¨å¾®åŠ ç²—åˆ†å‰²çº¿
    resetDiv.style.background = '#fafafa'; // æµ…ç°è‰²èƒŒæ™¯åŒºåˆ«å¼€
    resetDiv.innerHTML = `
        <div class="flag" style="background:#1a1a1a; display:flex; align-items:center; justify-content:center; color:white; font-size:12px;">?</div>
        <span style="font-weight:bold; color:#475569;">é‡ç½®å¹¶é‡æ–°é€‰æ‹©</span>
    `;
    // å…³é”®ç‚¹ï¼šç»‘å®šç‚¹å‡»äº‹ä»¶
    resetDiv.onclick = (e) => {
        e.stopPropagation(); // é˜²æ­¢å†’æ³¡
        resetToInitial();
    };
    langListContent.appendChild(resetDiv);
    // --------------------------------------

    
        Object.keys(langConfigs).forEach(key => {
            const config = langConfigs[key];
            const div = document.createElement('div');
            div.className = 'lang-option';
            div.innerHTML = `<img src="https://flagcdn.com/w40/${config.flag}.png" class="flag"> <span>${config.name}</span>`;
            div.onclick = () => selectLanguage(key);
            langListContent.appendChild(div);
        });
        modal.style.display = 'flex';
    };

    function closeModal() { modal.style.display = 'none'; }

    function selectLanguage(langCode) {
    const config = langConfigs[langCode];
    if (!config) return;

    // æ›´æ–°å½“å‰é€‰ä¸­çš„è¯­è¨€
    currentTargetLang = langCode;

    // è·å– DOM å…ƒç´ 
    const flagImg = document.getElementById('target-flag');
    const placeholder = document.getElementById('target-flag-placeholder');
    const targetText = document.getElementById('target-text');
    const navTitle = document.getElementById('nav-title');
    const searchInput = document.getElementById('search-input');

    // æ ¸å¿ƒåˆ‡æ¢é€»è¾‘ï¼š
    if (placeholder) {
        placeholder.style.display = 'none'; // éšè—é»‘è‰²é—®å·
    }
    if (flagImg) {
        flagImg.src = `https://flagcdn.com/w80/${config.flag}.png`;
        flagImg.style.display = 'block'; // æ˜¾ç¤ºé€‰ä¸­çš„å›½æ——
    }

    // æ›´æ–°ç•Œé¢æ–‡å­—
    if (targetText) {
        targetText.innerText = config.name;
        targetText.style.color = '#333';
    }
    if (navTitle) {
        navTitle.innerText = config.title;
    }
    if (searchInput) {
        searchInput.placeholder = `è¾“å…¥ä¸­æ–‡æˆ–${config.name}...`;
    }

    closeModal();
}

    // 3. æœç´¢è¯·æ±‚é€»è¾‘
    const searchForm = document.getElementById('search-form');
    const resultContainer = document.getElementById('result-container');

    searchForm.onsubmit = async (e) => {
        e.preventDefault();
        // æ ¸å¿ƒé€»è¾‘ï¼šæ‹¦æˆªæœªé€‰æ‹©è¯­è¨€çš„çŠ¶æ€
    if (!currentTargetLang) {
        // è®©è¯­è¨€é€‰æ‹©å™¨æ™ƒåŠ¨ä¸€ä¸‹æé†’ç”¨æˆ·
        langTrigger.style.transform = "scale(1.1)";
        langTrigger.style.borderColor = "#ff4d4f";
        setTimeout(() => {
            langTrigger.style.transform = "scale(1)";
            langTrigger.style.borderColor = "#4CAF50";
        }, 200);
        
        alert("è¯·å…ˆé€‰æ‹©ç›®æ ‡è¯­è¨€ï¼ˆç‚¹å‡»ä¸Šæ–¹è¯­è¨€æ ï¼‰");
        return;
    }

    const query = document.getElementById('search-input').value.trim();
    if (!query) return;

        try {
            // å‘é€è¯·æ±‚ç»™åç«¯ï¼Œå¸¦ä¸Šå½“å‰é€‰ä¸­çš„è¯­è¨€ä»£ç 
            const response = await fetch(`/search?query=${encodeURIComponent(query)}&lang=${currentTargetLang}`);
            const data = await response.json();

            if (data.success) {
                renderResult(data.data);
            } else {
                resultContainer.innerHTML = `<div style="color:white; background:rgba(0,0,0,0.5); padding:15px; border-radius:10px; text-align:center;">æœªæ‰¾åˆ°å†…å®¹</div>`;
            }
        } catch (err) {
            resultContainer.innerHTML = `<div style="color:#ffcccc; text-align:center;">æœåŠ¡å™¨è¿æ¥å¤±è´¥</div>`;
        }
    };

    function renderResult(dataList) {
    const container = document.getElementById('result-container');
    container.innerHTML = ''; 

    dataList.forEach(match => {
        const details = match.all_details || {};
        const type = match.type || "åŠ¨è¯";
        const lang = currentTargetLang;
        // è®°å½•å·²ç»æ¸²æŸ“è¿‡çš„é”®ï¼Œé¿å…é‡å¤æ˜¾ç¤º
        const displayedKeys = new Set(["type", "è¯æ ¹"]); 

        const card = document.createElement('div');
        card.className = "result-card";

        // 1. æ¸²æŸ“å¤´éƒ¨
        let cardContent = `
            <div class="card-header">
                <span class="type-tag">${type}</span>
                <span class="root-text">${details["è¯æ ¹"] || ''}</span>
            </div>`;

        // 2. æ ¹æ® LANG_SCHEMAS é…ç½®æ¸²æŸ“ä¸»ä½“éƒ¨åˆ†
        const schema = (LANG_SCHEMAS[lang] && LANG_SCHEMAS[lang][type]);

        if (schema) {
            Object.keys(schema).forEach(sectionKey => {
                const section = schema[sectionKey];
                // æ£€æŸ¥è¯¥æ¿å—ä¸‹æ˜¯å¦æœ‰æ•°æ®
                const hasData = section.keys.some(k => details.hasOwnProperty(k));

                if (hasData) {
                    cardContent += `<div class="section-divider">${section.title}</div>`;
                    cardContent += `<div class="detail-grid">`;
                    
                    section.keys.forEach(k => {
                        if (details[k]) {
                            cardContent += `
                                <div class="detail-item">
                                    <span class="detail-label">${k}</span>
                                    <span class="detail-value">${details[k]}</span>
                                </div>`;
                            displayedKeys.add(k); // æ ‡è®°å·²å¤„ç†
                        }
                    });
                    cardContent += `</div>`;
                }
            });
        }

        // 3. æ¸²æŸ“å‰©ä½™çš„å…¶ä»–åŠè¡¥å……ä¿¡æ¯
        const remainingKeys = Object.keys(details).filter(k => !displayedKeys.has(k));
        
        if (remainingKeys.length > 0) {
            cardContent += `<div class="section-divider">å…¶ä»–ä¿¡æ¯</div>`;
            cardContent += `<div class="detail-grid">`;
            remainingKeys.forEach(k => {
                cardContent += `
                    <div class="detail-item">
                        <span class="detail-label">${k}</span>
                        <span class="detail-value">${details[k]}</span>
                    </div>`;
            });
            cardContent += `</div>`;
        }

        card.innerHTML = cardContent;
        container.appendChild(card);
    });
}

function resetToInitial() {
    currentTargetLang = null; // æ¸…ç©ºå½“å‰é€‰ä¸­çš„è¯­è¨€ä»£ç 

    const flagImg = document.getElementById('target-flag');
    const placeholder = document.getElementById('target-flag-placeholder');
    const targetText = document.getElementById('target-text');
    const navTitle = document.getElementById('nav-title');
    const searchInput = document.getElementById('search-input');
    const resultContainer = document.getElementById('result-container');

    // 1. æ¢å¤é»‘è‰²é—®å·å ä½ç¬¦
    if (placeholder) placeholder.style.display = 'flex';
    if (flagImg) flagImg.style.display = 'none';

    // 2. æ¢å¤åˆå§‹æ–‡å­—
    if (targetText) {
        targetText.innerText = 'é€‰æ‹©ç›®æ ‡è¯­è¨€';
        targetText.style.color = '#888';
    }
    if (navTitle) navTitle.innerText = 'ä¸‡èƒ½å¤šè¯­è¨€è¯å…¸';

    // 3. æ¢å¤æœç´¢æ¡†å’Œæ¸…ç©ºç»“æœ
    if (searchInput) {
        searchInput.placeholder = 'è¯·å…ˆé€‰æ‹©è¯­è¨€...';
        searchInput.value = '';
    }
    if (resultContainer) {
        resultContainer.innerHTML = '';
    }

    closeModal();
}

function clearAll() {
    document.getElementById('result-container').innerHTML = '';
    document.getElementById('search-input').value = ''; // é¡ºä¾¿æŠŠè¾“å…¥æ¡†ä¹Ÿæ¸…ç©º
    document.getElementById('search-input').focus();
}
</script>
</body>
</html>